(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{2528:function(t,a,i){Promise.resolve().then(i.bind(i,165)),Promise.resolve().then(i.t.bind(i,2972,23))},165:function(t,a,i){"use strict";i.d(a,{default:function(){return d}});var s=i(7437),e=i(2265);let n=t=>{var a;return null!==(a=({prep:"var(--color-gantt-prep)",cook:"var(--color-gantt-cook)",finish:"var(--color-gantt-finish)"})[t])&&void 0!==a?a:"var(--color-gantt-prep)"},l={prep:"Prep",cook:"Cooking",finish:"Finishing"},c={ROW_MULTIPLIER:10,MIN_ROW_HEIGHT:4,MIN_TIMELINE_HEIGHT:480},r={ROW_MULTIPLIER:5,MIN_ROW_HEIGHT:2,MIN_TIMELINE_HEIGHT:400};function d(t){let{steps:a}=t,[i,d]=(0,e.useState)(null),[o,h]=(0,e.useState)("horizontal"),[m,p]=(0,e.useState)(!1),[x,g]=(0,e.useState)(!1),[j,v]=(0,e.useState)(!1);(0,e.useEffect)(()=>{let t=()=>{p(window.innerWidth<=768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);let N=m?r:c,_=N.ROW_MULTIPLIER,u=N.MIN_ROW_HEIGHT,y=N.MIN_TIMELINE_HEIGHT,b=(0,e.useMemo)(()=>a.filter(t=>t.is_critical).sort((t,a)=>t.start_min-a.start_min),[a]),k=x?b:a;if(!a||0===a.length)return(0,s.jsx)("div",{className:"gantt-empty",children:"No timeline data available"});let C=Math.max(Math.max(...k.map(t=>t.end_min),0),1),M=(0,e.useMemo)(()=>{let t=[],a=C>40?10:5;for(let i=0;i<=C;i+=a)t.push(i);return t[t.length-1]!==C&&t.push(C),t},[C]),f=Math.ceil(C*_),w=Math.max(u,y/f),I=f*w,E="repeat(".concat(f,", ").concat(w,"px)"),T=t=>{d(t)};return(0,s.jsxs)("div",{className:"gantt-chart ".concat(o),children:[b.length>0&&(0,s.jsxs)("div",{className:"gantt-critical-path-summary",children:[(0,s.jsxs)("h3",{children:["⚡ Critical Path (",b.length," steps)"]}),(0,s.jsx)("p",{className:"critical-path-description",children:"These steps determine the minimum cooking time. Any delay here delays the entire recipe."}),(0,s.jsxs)("ol",{className:"critical-path-steps",children:[(j?b:b.slice(0,5)).map((t,a)=>(0,s.jsxs)("li",{onClick:()=>T(t),children:[(0,s.jsx)("span",{className:"step-number",children:a+1}),(0,s.jsx)("span",{className:"step-name",children:t.label}),(0,s.jsxs)("span",{className:"step-time",children:[t.duration_min,"m"]})]},t.id)),!j&&b.length>5&&(0,s.jsxs)("li",{className:"critical-path-more-steps",children:["...and ",b.length-5," more steps"]})]}),b.length>5&&(0,s.jsx)("button",{className:"critical-path-toggle-btn",onClick:()=>v(t=>!t),children:j?"Show less":"Show all steps"})]}),(0,s.jsxs)("div",{className:"gantt-controls",children:[(0,s.jsxs)("div",{className:"gantt-metadata",children:[C,"m total • ",b.length,"/",a.length," critical",x&&" • Showing critical only"]}),(0,s.jsxs)("div",{className:"gantt-control-buttons",children:[(0,s.jsx)("button",{onClick:()=>g(!x),className:"gantt-toggle-btn ".concat(x?"active":""),title:"Toggle critical path only",children:"⚡"}),(0,s.jsx)("button",{onClick:()=>h(t=>"vertical"===t?"horizontal":"vertical"),className:"gantt-toggle-btn",title:"Toggle orientation",children:"↔↕"})]})]}),"vertical"===o?(0,s.jsx)("div",{className:"gantt-vertical",children:(0,s.jsxs)("div",{className:"gantt-timeline-vertical",style:{height:I},children:[(0,s.jsxs)("div",{className:"gantt-axis-vertical",style:{height:I},children:[M.map(t=>(0,s.jsx)("div",{className:"gantt-axis-mark-vertical",style:{top:"".concat(t/C*100,"%")},children:(0,s.jsxs)("span",{children:[t,"m"]})},t)),(0,s.jsx)("div",{className:"gantt-axis-label",children:"Minutes"})]}),(0,s.jsx)("div",{className:"gantt-steps-vertical",style:{gridTemplateRows:E,height:I},children:k.map(t=>{let a=Math.min(Math.floor(t.start_min*_),f-1),e=Math.max(a+1,Math.ceil(t.end_min*_));return(0,s.jsx)("div",{className:"gantt-step-vertical ".concat((null==i?void 0:i.id)===t.id?"selected":""," ").concat(t.is_critical?"critical":""),style:{gridRow:"".concat(a+1," / ").concat(Math.min(e+1,f+1))},onClick:()=>T(t),children:(0,s.jsxs)("div",{className:"gantt-step-bar-vertical ".concat(t.is_critical?"critical":""),style:{backgroundColor:n(t.type)},children:[(0,s.jsxs)("div",{className:"gantt-step-label-vertical",children:[(0,s.jsxs)("span",{children:[t.is_critical&&(0,s.jsxs)("span",{className:"critical-indicator","aria-label":"Critical step",role:"img",children:["⚡",(0,s.jsx)("span",{className:"sr-only",children:"Critical step"})]}),t.label]}),(0,s.jsxs)("span",{className:"gantt-step-duration-vertical",children:[t.duration_min," min • ",t.start_min,"–",t.end_min," min",!t.is_critical&&t.slack_min>0&&" • ".concat(t.slack_min,"m slack")]})]}),(0,s.jsx)("span",{className:"gantt-step-type contrast ".concat(t.type," ").concat(t.is_critical?"critical":""),children:l[t.type]})]})},t.id)})})]})}):(0,s.jsxs)("div",{className:"gantt-horizontal",children:[(0,s.jsx)("div",{className:"gantt-axis gantt-axis-horizontal",children:M.map(t=>(0,s.jsx)("div",{className:"gantt-axis-mark",style:{left:"".concat(t/C*100,"%")},children:(0,s.jsxs)("span",{children:[t," min"]})},t))}),(0,s.jsx)("div",{className:"gantt-rows",children:k.map(t=>{let a=t.start_min/C*100,e=Math.max((t.end_min-t.start_min)/C*100,.5);return(0,s.jsxs)("div",{className:"gantt-row ".concat((null==i?void 0:i.id)===t.id?"selected":""," ").concat(t.is_critical?"critical":""),onClick:()=>T(t),children:[(0,s.jsxs)("div",{className:"gantt-row-info",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"gantt-row-label",children:[t.is_critical&&(0,s.jsxs)("span",{className:"critical-indicator","aria-label":"Critical step",role:"img",children:["⚡",(0,s.jsx)("span",{className:"sr-only",children:"Critical step"})]}),t.label]}),(0,s.jsxs)("p",{className:"gantt-row-meta",children:[l[t.type]," • ",t.duration_min," min • Start ",t.start_min,"m",!t.is_critical&&t.slack_min>0&&(0,s.jsxs)("span",{className:"slack-info",children:[" • ",t.slack_min,"m slack"]})]})]}),(0,s.jsx)("span",{className:"gantt-step-type ".concat(t.type," ").concat(t.is_critical?"critical":""),children:l[t.type]})]}),(0,s.jsx)("div",{className:"gantt-row-track",children:(0,s.jsx)("div",{className:"gantt-step-bar ".concat(t.is_critical?"critical":""),style:{left:"".concat(a,"%"),width:"".concat(e,"%"),backgroundColor:n(t.type)}})})]},t.id)})})]}),i&&(0,s.jsxs)("div",{className:"gantt-details",children:[(0,s.jsxs)("div",{className:"gantt-details-header",children:[(0,s.jsxs)("h3",{children:[i.is_critical&&(0,s.jsxs)("span",{className:"critical-indicator","aria-label":"Critical step",role:"img",children:["⚡",(0,s.jsx)("span",{className:"sr-only",children:"Critical step"})]}),i.label]}),(0,s.jsx)("span",{className:"gantt-step-type ".concat(i.type," ").concat(i.is_critical?"critical":""),children:l[i.type]})]}),i.is_critical&&(0,s.jsxs)("div",{className:"critical-path-badge",children:[(0,s.jsxs)("span",{className:"critical-path-badge-icon","aria-label":"Critical path",role:"img",children:["⚡",(0,s.jsx)("span",{className:"sr-only",children:"Critical path"})]}),"On Critical Path - Any delay here delays the entire recipe"]}),(0,s.jsxs)("div",{className:"gantt-details-grid",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Duration"}),(0,s.jsxs)("span",{children:[i.duration_min," minutes"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Timing"}),(0,s.jsxs)("span",{children:[i.start_min,"–",i.end_min," min"]})]}),!i.is_critical&&i.slack_min>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Slack Time"}),(0,s.jsxs)("span",{children:[i.slack_min," min (can be delayed without affecting total time)"]})]}),i.temperature_c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Temperature"}),(0,s.jsxs)("span",{children:[i.temperature_c,"\xb0C"]})]}),i.equipment.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Equipment"}),(0,s.jsx)("span",{children:i.equipment.join(", ")})]}),i.requires.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Requires"}),(0,s.jsx)("span",{children:i.requires.join(", ")})]}),i.can_overlap_with.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Can overlap with"}),(0,s.jsx)("span",{children:i.can_overlap_with.join(", ")})]})]}),(0,s.jsx)("div",{className:"gantt-details-text",children:i.raw_text}),i.notes&&(0,s.jsx)("div",{className:"gantt-details-text note",children:i.notes}),(0,s.jsx)("button",{onClick:()=>d(null),className:"gantt-close-btn",children:"Clear selection"})]})]})}}},function(t){t.O(0,[972,971,117,744],function(){return t(t.s=2528)}),_N_E=t.O()}]);